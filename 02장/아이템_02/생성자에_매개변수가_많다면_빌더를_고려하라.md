# 생성자에 매개변수가 많다면 빌더를 고려하라

## 생성자에 매개변수가 많다면...

    개발시 생성자를 생성할 때 매개변수의 개수를 고려하여 생성자를 여러개 나열하게 된다.
    2,3개 정도는 괜찮지만 매개변수가 많아지면 사용자 입장에서 객체 생성할 때나 코드를 읽을 때 각 값의 의미가 무엇인지 헷갈리고, 매개변수가 몇 개인지도 주의해서 세어보아야한다.
    또한, 같은 타입이 연달아 있을 때 찾기 어려워 버그로 이어질 수 있다.

## (기본) 점층적 생성자 패턴
```JAVA
public class Address {
    private final String country;
    private final String city;
    private final String province;
    private final String addressLine;
    private final int postalCode;

    
    public Address(String addressLine, int postalCode){
        this("city", addressLine,postalCode);
    }

    public Address(String city, String addressLine, int postalCode){
        this("country", city, addressLine, postalCode);
    }

    public Address(String country, String city, String addressLine, int postalCode){
        this(country, city, "province", addressLine, postalCode);
    }

    public Address(String country, String city, String province, String addressLine, int postalCode){
    this.country = country;
    this.city = city;
    this.province = province;
    this.addressLine = addressLine;
    this.postalCode = postalCode;
    }
}
```

### 문제점
    1. 매개변수가 많으며 코드가 길어지고 가독성이 떨어짐
    2. 실수하기 쉬운 구조


## (대안1) 자바빈즈 패턴
```JAVA
public class Address {
    private String country = "";
    private String city = ""; 
    private String province = "";
    private String addressLine = "null";  // 필수
    private int postalCode = -1; // 필수

    public Address(String addressLine, int postalCode){
        this("city", addressLine,postalCode);
    }

    public Address(String city, String addressLine, int postalCode){
        this("country", city, addressLine, postalCode);
    }

    public Address(String country, String city, String addressLine, int postalCode){
        this(country, city, "province", addressLine, postalCode);
    }

    public Address(String country, String city, String province, String addressLine, int postalCode){
    this.country = country;
    this.city = city;
    this.province = province;
    this.addressLine = addressLine;
    this.postalCode = postalCode;
    }

    public void setCountry(String value){country = value;}
    public void setCity(String value){city = value;}
    public void setProvince(String value){province = value;}
    public void setAddressLine(String value){addressLine = value;}
    public void setPostalCode(int value){postalCode = value;}
    
}
```

### 장점
    1. 점층적 생성자 패턴에 비해 코드가 길어졌지만 인스턴스를 만들기 쉬움
    2. 보다 나은 가독성


### 단점
    1. 객체 하나를 만들려면 메서드를 여러개 호출
    2. 객체가 완전히 생성되기 전까지 일관성이 무너진 상태로 존재
    2-1. 매개변수들에 대한 유효성 검사가 힘듬



## (대안2) 빌더 패턴
```JAVA
public class Address {
    private final String country;
    private final String city;
    private final String province;
    private final String addressLine;
    private final int postalCode;


    public static class Builder {
        //선택 매개변수
        private String country = "";
        private String city = "";
        private String province = "";

        //필수 매개변수
        private final String addressLine;
        private final int postalCode;

        public Builder(String addressLine, int postalCode){
            this.addressLine = addressLine;
            this.postalCode = postalCode;
        }

        public Builder country(String value)
        { country = value; return this; }

        public Builder city(String value)
        { city = value; return this; }

        public Builder province(String value)
        { province = value; return this; }

        public Address build(){
            return new Address(this);
        }

    }

    private Address(Builder builder){
        country = builder.country;
        city = builder.city;
        province = builder.province;
        addressLine = builder.addressLine;
        postalCode = builder.postalCode;

    }
}
```

### 특징
    1. 빌더의 세터 메서드들은빌더 자신을 반환하기 때문에 연쇄적 호출 가능 (= 플루언트API or 메서드 연쇄)

### 사용자 코드
```JAVA
    Address builder = new Address.Builder("",000)
    .country("Seoul")
    .city("mapo")
    .province("hongdae")
    .build();
```

### 장점
    1. 가독성 향상